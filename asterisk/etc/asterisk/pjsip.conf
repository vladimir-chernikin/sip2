; pjsip.conf ‚Äì –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è 1001 + –ë–∏–ª–∞–π–Ω

[global]
type=global
endpoint_identifier_order=username,ip,anonymous

; ===== –¢–†–ê–ù–°–ü–û–†–¢ UDP =====
[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060
external_media_address=109.172.46.197
external_signaling_address=109.172.46.197
local_net=172.18.0.0/16   # üîß Docker —Å–µ—Ç—å
local_net=172.16.0.0/12
local_net=10.0.0.0/8
local_net=192.168.0.0/16

; ===== AOR 1001 =====
[1001]
type=aor
max_contacts=1
remove_existing=yes
remove_unavailable=yes
default_expiration=60
qualify_frequency=30
qualify_timeout=3.0

; ===== AUTH 1001 =====
[1001]
type=auth
auth_type=userpass
username=1001
password=1001pass

; ===== ENDPOINT 1001 =====
[1001]
type=endpoint
context=from-internal
disallow=all
allow=alaw
allow=ulaw
allow=slin16
transport=transport-udp
auth=1001
aors=1001
direct_media=no
dtmf_mode=rfc4733
rewrite_contact=yes
rtp_symmetric=yes
force_rport=yes
rtp_keepalive=5

; ===== –ë–ò–õ–ê–ô–ù SIP –¢–†–ê–ù–ö =====

; AUTH –¥–ª—è –ë–∏–ª–∞–π–Ω (–¥–ª—è registration outbound)
[beeline-auth]
type=auth
auth_type=userpass
username=SIP030FQU0451O@ip.beeline.ru
password=ZAQ12wsx-

; AOR –¥–ª—è –ë–∏–ª–∞–π–Ω (–¥–ª—è outbound)
[beeline-aor]
type=aor
contact=sip:SIP030FQU0451O@ip.beeline.ru
qualify_frequency=30
qualify_timeout=5.0

; REGISTER –¥–ª—è –ë–∏–ª–∞–π–Ω (outbound only)
[beeline-reg]
type=registration
transport=transport-udp
outbound_auth=beeline-auth
server_uri=sip:ip.beeline.ru:5060
client_uri=sip:SIP030FQU0451O@ip.beeline.ru
retry_interval=60
expiration=300
contact_user=SIP030FQU0451O

; IDENTIFY –¥–ª—è –º–∞—Ç—á–∏–Ω–≥–∞ –≤—Ö–æ–¥—è—â–∏—Ö –æ—Ç –ë–∏–ª–∞–π–Ω –ø–æ IP
[beeline-in-identify]
type=identify
endpoint=beeline-in
match=185.243.5.36
match=51.91.168.102
match=84.201.137.0
match=185.150.191.123    ; üîß –ù–æ–≤—ã–π IP –ë–∏–ª–∞–π–Ω (–æ–±–Ω–∞—Ä—É–∂–µ–Ω 2025-02-11)

; AOR –¥–ª—è –í–•–û–î–Ø–©–ò–• –æ—Ç –ë–∏–ª–∞–π–Ω (–ø—É—Å—Ç–æ–π, –¥–ª—è inbound)
[beeline-in-aor]
type=aor
remove_existing=yes
remove_unavailable=yes
max_contacts=1

; ENDPOINT –¥–ª—è –í–•–û–î–Ø–©–ò–• –æ—Ç –ë–∏–ª–∞–π–Ω
; –†–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ telephonization.ru (–æ–∫—Ç—è–±—Ä—å 2023)
[beeline-in]
type=endpoint
context=from-beeline
disallow=all
allow=alaw
transport=transport-udp
aors=beeline-in-aor
direct_media=no
dtmf_mode=auto
rewrite_contact=yes
rtp_symmetric=no              ; üîß –û—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è –∏–Ω–∏—Ü–∏–∞—Ü–∏–∏ RTP –ø–µ—Ä–≤—ã–º
force_rport=yes
rtp_keepalive=5
from_user=SIP030FQU0451O
from_domain=ip.beeline.ru
media_address=109.172.46.197
trust_id_inbound=yes
inband_progress=yes
language=ru

; ENDPOINT –¥–ª—è –ò–°–•–û–î–Ø–©–ò–• –Ω–∞ –ë–∏–ª–∞–π–Ω (—Å auth)
; –†–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ telephonization.ru (–æ–∫—Ç—è–±—Ä—å 2023)
[beeline-out]
type=endpoint
context=from-internal
disallow=all
allow=alaw
transport=transport-udp
auth=beeline-auth
outbound_auth=beeline-auth
aors=beeline-aor
direct_media=no
dtmf_mode=auto
rewrite_contact=yes
rtp_symmetric=no              ; üîß –û—Ç–∫–ª—é—á–µ–Ω–æ –¥–ª—è –∏–Ω–∏—Ü–∏–∞—Ü–∏–∏ RTP –ø–µ—Ä–≤—ã–º
force_rport=yes
rtp_keepalive=5
from_user=SIP030FQU0451O
from_domain=ip.beeline.ru
media_address=109.172.46.197
inband_progress=yes
language=ru
